# åŸºç¡€ç¯‡

> ***æ³¨é‡ï¼šç®—æ³•ã€æ•°æ®ç»“æ„ã€å¸¸è§çš„è®¾è®¡æ¨¡å¼***

## 1.äºŒåˆ†æŸ¥æ‰¾

**è¦æ±‚**

* èƒ½å¤Ÿç”¨è‡ªå·±è¯­è¨€æè¿°äºŒåˆ†æŸ¥æ‰¾ç®—æ³•

    - ç­”ï¼š`äºŒåˆ†æŸ¥æ‰¾å°±æ˜¯ç”¨ä¸­é—´å€¼çš„æ•°ä¸ç›®æ ‡æ•°åšå¯¹æ¯”ï¼Œå¦‚æœè®¡ç®—å‡ºç›®æ ‡æ•°æ¯”ä¸­é—´æ•°å¤§ï¼Œåˆ™è¯´æ˜ç›®æ ‡æ•°åœ¨ä¸­é—´æ•°åˆ°æœ€å³ç«¯ä¹‹é—´ï¼Œåä¹‹åˆ™å°ã€‚`
    - ç®—æ³•æ€æƒ³`å¯è§æœ€å·¦ç«¯å’Œæœ€å³ç«¯æ˜¯ä¸¤ä¸ªå˜é‡ï¼Œéœ€è¦é€šè¿‡è¿™ä¸¤ä¸ªå˜é‡æ¥æ§åˆ¶æ•´ä¸ªç®—æ³•è¿›è¡Œï¼Œæ­£å¸¸æƒ…å†µåˆ™æ˜¯å·¦ç«¯ä¸€å®šè¦å°äºç­‰äºå³ç«¯æ‰ä¸æ–­çš„è¿›è¡Œå¾ªç¯ï¼Œåæ­£ç®—æ³•ç»“æŸã€‚`
* èƒ½å¤Ÿæ‰‹å†™äºŒåˆ†æŸ¥æ‰¾ä»£ç 
* å¿«é€Ÿè§£ç­”äºŒåˆ†æŸ¥æ‰¾çš„é€‰æ‹©é¢˜
* èƒ½å¤Ÿè§£ç­”ä¸€äº›å˜åŒ–åçš„è€ƒæ³•



**ç®—æ³•æè¿°**

1. å‰æï¼šæœ‰å·²æ’åºæ•°ç»„ Aï¼ˆå‡è®¾å·²ç»åšå¥½ï¼‰

2. å®šä¹‰å·¦è¾¹ç•Œ Lã€å³è¾¹ç•Œ Rï¼Œç¡®å®šæœç´¢èŒƒå›´ï¼Œå¾ªç¯æ‰§è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼ˆ3ã€4ä¸¤æ­¥ï¼‰

3. è·å–ä¸­é—´ç´¢å¼• M = Floor((L+R) /2)  `Flooræ˜¯å‘ä¸‹å–æ•´çš„æ„æ€`

4. ä¸­é—´ç´¢å¼•çš„å€¼  A[M] ä¸å¾…æœç´¢çš„å€¼ T è¿›è¡Œæ¯”è¾ƒ

   â‘  A[M] == T è¡¨ç¤ºæ‰¾åˆ°ï¼Œè¿”å›ä¸­é—´ç´¢å¼•

   â‘¡ A[M] > Tï¼Œä¸­é—´å€¼å³ä¾§çš„å…¶å®ƒå…ƒç´ éƒ½å¤§äº Tï¼Œæ— éœ€æ¯”è¾ƒï¼Œä¸­é—´ç´¢å¼•å·¦è¾¹å»æ‰¾ï¼ŒM - 1 è®¾ç½®ä¸ºå³è¾¹ç•Œï¼Œé‡æ–°æŸ¥æ‰¾

   â‘¢ A[M] < Tï¼Œä¸­é—´å€¼å·¦ä¾§çš„å…¶å®ƒå…ƒç´ éƒ½å°äº Tï¼Œæ— éœ€æ¯”è¾ƒï¼Œä¸­é—´ç´¢å¼•å³è¾¹å»æ‰¾ï¼Œ M + 1 è®¾ç½®ä¸ºå·¦è¾¹ç•Œï¼Œé‡æ–°æŸ¥æ‰¾

5. å½“ L => R æ—¶ï¼Œè¡¨ç¤ºæ²¡æœ‰æ‰¾åˆ°ï¼Œåº”ç»“æŸå¾ªç¯

*[æ›´å½¢è±¡çš„å›¾ç¤ºæ¼”ç¤ºè¯·å‚è€ƒ ğŸ‘‰ æ¼”ç¤ºåŠ¨ç”»](docs/md/Serious-eight-part-essay/JAVA/binary_search.html)*

**ç®—æ³•å®ç°å’Œæµ‹è¯•ï¼š**ï¼ˆä»¥jdké‡Œçš„Arrays.binarySearch()æ–¹æ³•æ¥å®ç°ï¼‰

```java
public class BinarySearch {
    // æµ‹è¯•
    public static void main(String[] args) {
        BinarySearch binarySearch = new BinarySearch();
        int[] array = {1, 12, 23, 54, 55, 66, 67, 80, 99};
        int temp = 55;
        String shuo = binarySearch.binarySearch(array,temp);
        System.out.println(shuo);
    }
    // ç®—æ³•å®ç°
    public String binarySearch(int [] array,int temp) {
        int l =0;   int r =array.length-1;
        while (l<=r) {
            int model = (l+r) / 2;
            if (temp == array[model]) {
                return "æ˜¯è¿™ä¸ªæ•°    "+temp;
            } else if (temp > array[model]) {
               l=model+1;

            } else if(temp < array[model]){
                r=model-1;
            }
        }
        return "æ²¡æ‰¾ç€";
    }
}

```

**è§£å†³æ•´æ•°æº¢å‡ºé—®é¢˜**

> *æº¢å‡ºè¿‡ç¨‹è¯¦è§£*ï¼š

```java
public static void main(String[] args) {
        int left = 0;
        int right = Integer.MAX_VALUE - 1;
        int middle = (left + right) / 2;
        System.out.println(right);//2147483646
        System.out.println(middle);//1073741823
        // å¾—å‡ºä¸­é—´å€¼ä¸º m = 10äº¿å¤šï¼Œå¦‚æœæ¥ä¸‹æ¥å†è®¡ç®—ï¼ˆint m =(l+r)/2 ï¼‰ï¼Œåˆ™ä¼šç»§ç»­è¿›è¡Œ l+r è¿ç®—ï¼Œå°±ç­‰äº30äº¿å¤šäº†ï¼Œè¶…å‡ºäº†intçš„æœ€å¤§å€¼ã€‚
//        ä¸¾ä¾‹å­
//        åœ¨å³ä¾§
        left = middle + 1;
        middle = (left + right) / 2;
        System.out.println(middle);//-536870913
//        äºŒè¿›åˆ¶è¿ç®—ï¼Œæ¼”ç¤ºä¸¤ä¸ªæ­£æ•´æ•°ç›¸åŠ å˜æˆè´Ÿæ•°ï¼Œè§„åˆ™ï¼šé€¢ 2 è¿› 1ï¼Œä¸º 2 æ˜¯ 0.
//        æ¯”å¦‚ 126 + 63 è§„å®šåœ¨ä¸€ä¸ªbyteï¼ˆ8ä¸ªbitï¼‰å†…ä¸”æœ‰ç¬¦å·ï¼Œ åˆ™ç»“æœä¸æ˜¯ 189ï¼Œè€Œæ˜¯ -67
//         ç¬¦å·ä½ï¼Œ0ä»£è¡¨æ­£->   0 1 1 1  1 1 1 0      å€¼ä¸º126
//                        +  0 0 1 1  1 1 1 1      å€¼ä¸º63
//                           1 0 1 1  1 1 0 1      å€¼ä¸º-67
//
//        æ–¹æ³•ä¸€ï¼š (l + r)/2 ==> l - l/2 + r/2 ==> l + (r/2 - l/2) ==> l + (r-l)/2    åˆ©ç”¨å¤§å€¼å…ˆå‡å»å·¦è¾¹ç•Œåå…ˆé™¤ä»¥2ï¼Œè¿™æ ·å³ä½¿å†åŠ ä¸Šå·¦è¾¹ç•Œä¹Ÿå°äº†
        middle = left + (right - left) / 2;
        System.out.println(middle);//1610612735
//        æ–¹æ³•äºŒï¼›  ç”¨æ— ç¬¦å·çš„å³ç§»è¿ç®—ä»£æ›¿æ‰é™¤æ³•ã€‚  å‘å³ç§»ä¸€ä½
        middle = (left + right) >>> 1;
        System.out.println(middle);
    }
```

å½“ l å’Œ r éƒ½è¾ƒå¤§æ—¶ï¼Œ`l + r` æœ‰å¯èƒ½è¶…è¿‡æ•´æ•°èŒƒå›´ï¼Œé€ æˆè¿ç®—é”™è¯¯ï¼Œè§£å†³æ–¹æ³•æœ‰ä¸¤ç§ï¼š

ç›¸å…³é¢è¯•é¢˜
1 ï¼æœ‰ä¸€ä¸ªæœ‰åºè¡¨ä¸º 1 , 5 , 8 , 11 , 19 , 22 , 31 , 35 , 40 , 45 , 48 , 49 , 50 å½“äºŒåˆ†æŸ¥æ‰¾å€¼ä¸º 48 çš„ç»“ç‚¹æ—¶ï¼ŒæŸ¥æ‰¾æˆåŠŸéœ€è¦æ¯”è¾ƒçš„æ¬¡æ•°() 

2 ï¼ä½¿ç”¨äºŒåˆ†æ³•åœ¨åºåˆ— 1 , 4 , 6 , 7 , 15 , 33 , 39 , 50 , 64 , 78 , 75 , 81 , 89 , 96 ä¸­æŸ¥æ‰¾å…ƒç´  81 æ—¶ï¼Œéœ€è¦ç»è¿‡ï¼ˆï¼‰æ¬¡æ¯”è¾ƒ 
> å£è¯€ï¼š
> å¥‡æ•°äºŒåˆ†å–ä¸­é—´
> å¶æ•°äºŒåˆ†å–ä¸­é—´é å·¦

3 ï¼åœ¨æ‹¥æœ‰ä¸€ä¸ª 128 ä¸ªå…ƒç´ çš„æ•°ç»„ä¸­äºŒåˆ†æŸ¥æ‰¾ä¸€ä¸ªæ•°ï¼Œéœ€è¦æ¯”è¾ƒçš„æ¬¡æ•°æœ€å¤šä¸è¶…è¿‡å¤šå°‘æ¬¡  
-  $2^n$   = 128 æˆ– 128 /2 /2....ç›´åˆ° 1
-  é—®é¢˜è½¬åŒ–ä¸º$log_2 128=7$, è®¡ç®—å™¨åˆ™æ˜¯ $log_10 128/$log_10 2 = 7$  å››èˆäº”å…¥å–æ•´ã€‚

   - æ˜¯æ•´æ•°ï¼Œåˆ™æ•´æ•°å³ä¸ºæœ€ç»ˆç»“æœ
   
   - æ˜¯å°æ•°ï¼Œåˆ™èˆå»å°æ•°éƒ¨åˆ†ï¼Œæ•´æ•°åŠ ä¸€ä¸ºæœ€ç»ˆç»“æœ
   

------



##  7.ArrayList

**è¦æ±‚**

* æŒæ¡ ArrayList æ‰©å®¹è§„åˆ™

æ— å‚ArrayList ï¼Œåˆå§‹å€¼æ˜¯ç©ºï¼Œå³ä¸º0ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = {};

public ArrayList() {
        this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;
    }
```

æœ‰å‚ArrayList ,åˆå§‹å€¼æ˜¯æ•´æ•°ï¼Œåˆå§‹å€¼æ˜¯é‚£ä¸ªæ•´æ•°å‚æ•°çš„å¤§å°ï¼Œé»˜è®¤æ˜¯10ã€‚

```java
private static final Object[] EMPTY_ELEMENTDATA = {};

public ArrayList(int initialCapacity) {
        if (initialCapacity > 0) {
            this.elementData = new Object[initialCapacity];
        } else if (initialCapacity == 0) {
            this.elementData = EMPTY_ELEMENTDATA;
        } else {
            throw new IllegalArgumentException("Illegal Capacity: "+
                                               initialCapacity);
        }
    }
```

æœ‰å‚ArrayList ï¼Œåˆå§‹å€¼æ˜¯é›†åˆï¼Œåˆå§‹å€¼æ˜¯é›†åˆå…ƒç´ ä¸ªæ•°ï¼š

```java


public ArrayList(Collection<? extends E> c) {
        Object[] a = c.toArray();
        if ((size = a.length) != 0) {
            if (c.getClass() == ArrayList.class) {
                elementData = a;
            } else {
                elementData = Arrays.copyOf(a, size, Object[].class);
            }
        } else {
            // replace with empty array.
            elementData = EMPTY_ELEMENTDATA;
        }
    }
```

**æ‰©å®¹**ï¼š

 åœ¨ Java ä¸­ï¼ŒArrayList å†…éƒ¨é‡‡ç”¨ä¸€ä¸ªæ•°ç»„æ¥å­˜å‚¨å…ƒç´ ï¼Œå½“æ•°ç»„çš„é•¿åº¦ä¸è¶³ä»¥å®¹çº³æ–°çš„å…ƒç´ æ—¶ï¼Œéœ€è¦è¿›è¡Œæ‰©å®¹æ“ä½œã€‚ArrayList çš„æ‰©å®¹æœºåˆ¶æ˜¯æ¯æ¬¡æ‰©å®¹å®¹é‡å˜ä¸ºåŸæ¥çš„ 1.5 å€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡æ‰©å®¹åï¼Œæ•°ç»„çš„é•¿åº¦ä¼šå˜ä¸ºåŸæ¥çš„ 1.5 å€ã€‚ 

**1.5 å€çš„æ¥ç”±ï¼š**

åŸæ•°ç»„çš„å…ƒç´ ä¸ªæ•°å€¼ï¼Œå³ç§»ä¸€ä½ï¼Œåœ¨äºŒè¿›åˆ¶ä¸­ï¼Œå³ç§»ä¸€ä½ç›¸å½“äºé™¤ä»¥2ï¼Œå¾—å‡ºæ•°å­—åä¸åŸæ•°ç»„å…ƒç´ ä¸ªæ•°ç›¸åŠ ï¼Œå¾—å‡ºç»“æœä¸ºæ–°æ•°ç»„å¤§å°ï¼Œeg:åŸæ•°ç»„å¤§å°æ˜¯15,15>>1ï¼Œå¾—7ï¼Œ15+7=22ï¼Œå³æ–°æ•°ç»„å¤§å°ä¸º22ã€‚

ä»£ç ï¼š

```java
private void ensureCapacityInternal(int minCapacity) {
    // å¦‚æœ ArrayList çš„å®¹é‡ä¸è¶³ä»¥å®¹çº³æ–°çš„å…ƒç´ 
    if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {
        // å¦‚æœ ArrayList å†…éƒ¨æ•°ç»„è¿˜æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œåˆ™åˆå§‹åŒ–ä¸€ä¸ªé»˜è®¤é•¿åº¦ä¸º 10 çš„æ•°ç»„
        minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);
    }
    // å¦‚æœéœ€è¦æ‰©å®¹
    if (minCapacity - elementData.length > 0)
        grow(minCapacity);
}

/**
 * æ‰©å®¹æ–¹æ³•
 */
private void grow(int minCapacity) {
    // æ‰©å®¹å‰çš„æ•°ç»„é•¿åº¦
    int oldCapacity = elementData.length;
    // æ‰©å®¹åçš„æ•°ç»„é•¿åº¦ï¼Œæ¯æ¬¡æ‰©å®¹ä¸ºåŸæ¥çš„ 1.5 å€
    int newCapacity = oldCapacity + (oldCapacity >> 1);
    // å¦‚æœæ‰©å®¹åçš„æ•°ç»„é•¿åº¦ä¾ç„¶æ— æ³•å®¹çº³å…ƒç´ ï¼Œåˆ™å°†æ•°ç»„é•¿åº¦è®¾ä¸º minCapacity(*è¦æ·»åŠ å…ƒç´ çš„ä¸ªæ•°ï¼Œå³æ–°æ•°ç»„æ‰©å®¹åä¹Ÿæ— æ³•æ»¡è¶³å¤§å°ï¼Œç›´æ¥å»ºè¦ä¼ å…¥å…ƒç´ ä¸ªæ•°å¤§å°çš„æ•°ç»„*)
    if (newCapacity - minCapacity < 0)
        newCapacity = minCapacity;
    // å°†åŸæ¥çš„æ•°ç»„æ‹·è´åˆ°æ–°çš„æ•°ç»„ä¸­
    elementData = Arrays.copyOf(elementData, newCapacity);
}

```

**æ‰©å®¹è§„åˆ™æ€»ç»“**

1. ArrayList() ä¼šä½¿ç”¨é•¿åº¦ä¸ºé›¶çš„æ•°ç»„
2. ArrayList(int initialCapacity) ä¼šä½¿ç”¨æŒ‡å®šå®¹é‡çš„æ•°ç»„
3. public ArrayList(Collection<? extends E> c) ä¼šä½¿ç”¨ c çš„å¤§å°ä½œä¸ºæ•°ç»„å®¹é‡
4. add(Object o) é¦–æ¬¡æ‰©å®¹ä¸º 10ï¼Œå†æ¬¡æ‰©å®¹ä¸ºä¸Šæ¬¡å®¹é‡çš„ 1.5 å€
5. addAll(Collection c) æ²¡æœ‰å…ƒç´ æ—¶ï¼Œæ‰©å®¹ä¸º Math.max(10, å®é™…å…ƒç´ ä¸ªæ•°)å–ä¸¤è€…ä¹‹é—´æœ€å¤§å€¼ï¼Œæœ‰å…ƒç´ æ—¶ä¸º Math.max(åŸå®¹é‡ 1.5 å€, å®é™…å…ƒç´ ä¸ªæ•°)

------


