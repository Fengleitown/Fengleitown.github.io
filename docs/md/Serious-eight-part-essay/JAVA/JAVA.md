# åŸºç¡€ç¯‡

> ***æ³¨é‡ï¼šç®—æ³•ã€æ•°æ®ç»“æ„ã€å¸¸è§çš„è®¾è®¡æ¨¡å¼***

## ç®—æ³•éƒ¨åˆ†

- æŒæ¡å¸¸è§æ’åºç®—æ³•ï¼ˆäºŒåˆ†ã€å†’æ³¡ã€å¿«æ’ã€é€‰æ‹©ã€æ’å…¥ç­‰ï¼‰
- æ‰‹å†™å†’æ³¡ã€å¿«æ’çš„ä»£ç 
- äº†è§£å„ä¸ªæ’åºç®—æ³•çš„ç‰¹æ€§ï¼Œå¦‚æ—¶é—´å¤æ‚åº¦ã€æ˜¯å¦ç¨³å®š

------



### 1.äºŒåˆ†æŸ¥æ‰¾

**è¦æ±‚**

* èƒ½å¤Ÿç”¨è‡ªå·±è¯­è¨€æè¿°äºŒåˆ†æŸ¥æ‰¾ç®—æ³•

    - ç­”ï¼š`äºŒåˆ†æŸ¥æ‰¾å°±æ˜¯ç”¨ä¸­é—´å€¼çš„æ•°ä¸ç›®æ ‡æ•°åšå¯¹æ¯”ï¼Œå¦‚æœè®¡ç®—å‡ºç›®æ ‡æ•°æ¯”ä¸­é—´æ•°å¤§ï¼Œåˆ™è¯´æ˜ç›®æ ‡æ•°åœ¨ä¸­é—´æ•°åˆ°æœ€å³ç«¯ä¹‹é—´ï¼Œåä¹‹åˆ™å°ã€‚`
    - ç®—æ³•æ€æƒ³`å¯è§æœ€å·¦ç«¯å’Œæœ€å³ç«¯æ˜¯ä¸¤ä¸ªå˜é‡ï¼Œéœ€è¦é€šè¿‡è¿™ä¸¤ä¸ªå˜é‡æ¥æ§åˆ¶æ•´ä¸ªç®—æ³•è¿›è¡Œï¼Œæ­£å¸¸æƒ…å†µåˆ™æ˜¯å·¦ç«¯ä¸€å®šè¦å°äºç­‰äºå³ç«¯æ‰ä¸æ–­çš„è¿›è¡Œå¾ªç¯ï¼Œåæ­£ç®—æ³•ç»“æŸã€‚`
* èƒ½å¤Ÿæ‰‹å†™äºŒåˆ†æŸ¥æ‰¾ä»£ç 
* å¿«é€Ÿè§£ç­”äºŒåˆ†æŸ¥æ‰¾çš„é€‰æ‹©é¢˜
* èƒ½å¤Ÿè§£ç­”ä¸€äº›å˜åŒ–åçš„è€ƒæ³•



**ç®—æ³•æè¿°**

1. å‰æï¼šæœ‰å·²æ’åºæ•°ç»„ Aï¼ˆå‡è®¾å·²ç»åšå¥½ï¼‰

2. å®šä¹‰å·¦è¾¹ç•Œ Lã€å³è¾¹ç•Œ Rï¼Œç¡®å®šæœç´¢èŒƒå›´ï¼Œå¾ªç¯æ‰§è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼ˆ3ã€4ä¸¤æ­¥ï¼‰

3. è·å–ä¸­é—´ç´¢å¼• M = Floor((L+R) /2)  `Flooræ˜¯å‘ä¸‹å–æ•´çš„æ„æ€`

4. ä¸­é—´ç´¢å¼•çš„å€¼  A[M] ä¸å¾…æœç´¢çš„å€¼ T è¿›è¡Œæ¯”è¾ƒ

   â‘  A[M] == T è¡¨ç¤ºæ‰¾åˆ°ï¼Œè¿”å›ä¸­é—´ç´¢å¼•

   â‘¡ A[M] > Tï¼Œä¸­é—´å€¼å³ä¾§çš„å…¶å®ƒå…ƒç´ éƒ½å¤§äº Tï¼Œæ— éœ€æ¯”è¾ƒï¼Œä¸­é—´ç´¢å¼•å·¦è¾¹å»æ‰¾ï¼ŒM - 1 è®¾ç½®ä¸ºå³è¾¹ç•Œï¼Œé‡æ–°æŸ¥æ‰¾

   â‘¢ A[M] < Tï¼Œä¸­é—´å€¼å·¦ä¾§çš„å…¶å®ƒå…ƒç´ éƒ½å°äº Tï¼Œæ— éœ€æ¯”è¾ƒï¼Œä¸­é—´ç´¢å¼•å³è¾¹å»æ‰¾ï¼Œ M + 1 è®¾ç½®ä¸ºå·¦è¾¹ç•Œï¼Œé‡æ–°æŸ¥æ‰¾

5. å½“ L => R æ—¶ï¼Œè¡¨ç¤ºæ²¡æœ‰æ‰¾åˆ°ï¼Œåº”ç»“æŸå¾ªç¯

*[æ›´å½¢è±¡çš„å›¾ç¤ºæ¼”ç¤ºè¯·å‚è€ƒ ğŸ‘‰ æ¼”ç¤ºåŠ¨ç”»](docs/md/Serious-eight-part-essay/JAVA/binary_search.html)*

**ç®—æ³•å®ç°å’Œæµ‹è¯•ï¼š**ï¼ˆä»¥jdké‡Œçš„Arrays.binarySearch()æ–¹æ³•æ¥å®ç°ï¼‰

```java
public class BinarySearch {
    // æµ‹è¯•
    public static void main(String[] args) {
        BinarySearch binarySearch = new BinarySearch();
        int[] array = {1, 12, 23, 54, 55, 66, 67, 80, 99};
        int temp = 55;
        String shuo = binarySearch.binarySearch(array,temp);
        System.out.println(shuo);
    }
    // ç®—æ³•å®ç°
    public String binarySearch(int [] array,int temp) {
        int l =0;   int r =array.length-1;
        while (l<=r) {
            int model = (l+r) / 2;
            if (temp == array[model]) {
                return "æ˜¯è¿™ä¸ªæ•°    "+temp;
            } else if (temp > array[model]) {
               l=model+1;

            } else if(temp < array[model]){
                r=model-1;
            }
        }
        return "æ²¡æ‰¾ç€";
    }
}

```

**è§£å†³æ•´æ•°æº¢å‡ºé—®é¢˜**

> *æº¢å‡ºè¿‡ç¨‹è¯¦è§£*ï¼š

```java
public static void main(String[] args) {
        int left = 0;
        int right = Integer.MAX_VALUE - 1;
        int middle = (left + right) / 2;
        System.out.println(right);//2147483646
        System.out.println(middle);//1073741823
        // å¾—å‡ºä¸­é—´å€¼ä¸º m = 10äº¿å¤šï¼Œå¦‚æœæ¥ä¸‹æ¥å†è®¡ç®—ï¼ˆint m =(l+r)/2 ï¼‰ï¼Œåˆ™ä¼šç»§ç»­è¿›è¡Œ l+r è¿ç®—ï¼Œå°±ç­‰äº30äº¿å¤šäº†ï¼Œè¶…å‡ºäº†intçš„æœ€å¤§å€¼ã€‚
//        ä¸¾ä¾‹å­
//        åœ¨å³ä¾§
        left = middle + 1;
        middle = (left + right) / 2;
        System.out.println(middle);//-536870913
//        äºŒè¿›åˆ¶è¿ç®—ï¼Œæ¼”ç¤ºä¸¤ä¸ªæ­£æ•´æ•°ç›¸åŠ å˜æˆè´Ÿæ•°ï¼Œè§„åˆ™ï¼šé€¢ 2 è¿› 1ï¼Œä¸º 2 æ˜¯ 0.
//        æ¯”å¦‚ 126 + 63 è§„å®šåœ¨ä¸€ä¸ªbyteï¼ˆ8ä¸ªbitï¼‰å†…ä¸”æœ‰ç¬¦å·ï¼Œ åˆ™ç»“æœä¸æ˜¯ 189ï¼Œè€Œæ˜¯ -67
//         ç¬¦å·ä½ï¼Œ0ä»£è¡¨æ­£->   0 1 1 1  1 1 1 0      å€¼ä¸º126
//                        +  0 0 1 1  1 1 1 1      å€¼ä¸º63
//                           1 0 1 1  1 1 0 1      å€¼ä¸º-67
//
//        æ–¹æ³•ä¸€ï¼š (l + r)/2 ==> l - l/2 + r/2 ==> l + (r/2 - l/2) ==> l + (r-l)/2    åˆ©ç”¨å¤§å€¼å…ˆå‡å»å·¦è¾¹ç•Œåå…ˆé™¤ä»¥2ï¼Œè¿™æ ·å³ä½¿å†åŠ ä¸Šå·¦è¾¹ç•Œä¹Ÿå°äº†
        middle = left + (right - left) / 2;
        System.out.println(middle);//1610612735
//        æ–¹æ³•äºŒï¼›  ç”¨æ— ç¬¦å·çš„å³ç§»è¿ç®—ä»£æ›¿æ‰é™¤æ³•ã€‚  å‘å³ç§»ä¸€ä½
        middle = (left + right) >>> 1;
        System.out.println(middle);
    }
```

å½“ l å’Œ r éƒ½è¾ƒå¤§æ—¶ï¼Œ`l + r` æœ‰å¯èƒ½è¶…è¿‡æ•´æ•°èŒƒå›´ï¼Œé€ æˆè¿ç®—é”™è¯¯ï¼Œè§£å†³æ–¹æ³•æœ‰ä¸¤ç§ï¼š

ç›¸å…³é¢è¯•é¢˜
1 ï¼æœ‰ä¸€ä¸ªæœ‰åºè¡¨ä¸º 1 , 5 , 8 , 11 , 19 , 22 , 31 , 35 , 40 , 45 , 48 , 49 , 50 å½“äºŒåˆ†æŸ¥æ‰¾å€¼ä¸º 48 çš„ç»“ç‚¹æ—¶ï¼ŒæŸ¥æ‰¾æˆåŠŸéœ€è¦æ¯”è¾ƒçš„æ¬¡æ•°() 

2 ï¼ä½¿ç”¨äºŒåˆ†æ³•åœ¨åºåˆ— 1 , 4 , 6 , 7 , 15 , 33 , 39 , 50 , 64 , 78 , 75 , 81 , 89 , 96 ä¸­æŸ¥æ‰¾å…ƒç´  81 æ—¶ï¼Œéœ€è¦ç»è¿‡ï¼ˆï¼‰æ¬¡æ¯”è¾ƒ 
> å£è¯€ï¼š
> å¥‡æ•°äºŒåˆ†å–ä¸­é—´
> å¶æ•°äºŒåˆ†å–ä¸­é—´é å·¦

3 ï¼åœ¨æ‹¥æœ‰ä¸€ä¸ª 128 ä¸ªå…ƒç´ çš„æ•°ç»„ä¸­äºŒåˆ†æŸ¥æ‰¾ä¸€ä¸ªæ•°ï¼Œéœ€è¦æ¯”è¾ƒçš„æ¬¡æ•°æœ€å¤šä¸è¶…è¿‡å¤šå°‘æ¬¡  
-  $2^n$   = 128 æˆ– 128 /2 /2....ç›´åˆ° 1
-  é—®é¢˜è½¬åŒ–ä¸º$log_2 128=7$, è®¡ç®—å™¨åˆ™æ˜¯ $log_10 128/$log_10 2 = 7$  å››èˆäº”å…¥å–æ•´ã€‚

   - æ˜¯æ•´æ•°ï¼Œåˆ™æ•´æ•°å³ä¸ºæœ€ç»ˆç»“æœ
   
   - æ˜¯å°æ•°ï¼Œåˆ™èˆå»å°æ•°éƒ¨åˆ†ï¼Œæ•´æ•°åŠ ä¸€ä¸ºæœ€ç»ˆç»“æœ
   

------

### 2. å†’æ³¡æ’åº

**è¦æ±‚**

* èƒ½å¤Ÿç”¨è‡ªå·±è¯­è¨€æè¿°å†’æ³¡æ’åºç®—æ³•
* èƒ½å¤Ÿæ‰‹å†™å†’æ³¡æ’åºä»£ç 
* äº†è§£ä¸€äº›å†’æ³¡æ’åºçš„ä¼˜åŒ–æ‰‹æ®µ

**ç®—æ³•æè¿°**

1. ä¾æ¬¡æ¯”è¾ƒæ•°ç»„ä¸­ç›¸é‚»ä¸¤ä¸ªå…ƒç´ å¤§å°ï¼Œè‹¥ a[j] > a[j+1]ï¼Œåˆ™äº¤æ¢ä¸¤ä¸ªå…ƒç´ ï¼Œä¸¤ä¸¤éƒ½æ¯”è¾ƒä¸€éç§°ä¸ºä¸€è½®å†’æ³¡ï¼Œç»“æœæ˜¯è®©æœ€å¤§çš„å…ƒç´ æ’è‡³æœ€å
2. é‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œç›´åˆ°æ•´ä¸ªæ•°ç»„æœ‰åº

**ç®—æ³•å®ç°**ï¼ˆä¼˜åŒ–`å¤–å±‚`å¾ªç¯çš„å¾ªç¯æ¯”è¾ƒæ¬¡æ•°â€”â€”æ’å¥½åºçš„æ•°ç»„ä¸éœ€è¦å†å¾ªç¯æ¯”è¾ƒï¼‰

```java
public class Test {
    public static void main(String[] args) {
        int[] array = {5, 9, 7, 4, 1, 3, 2, 8};
        bubble(array);
    }

    public static void bubble(int[] array) {
        int k;
        for (int j = 0; j < array.length - 1 - j; j++) { // array.length- 1- jæ¯è½®å°‘æ¯”ä¸€æ¬¡
            boolean swapped = false;// æ˜¯å¦å‘ç”Ÿäº†äº¤æ¢ï¼Œé¿å…å·²æ’å¥½åºåˆåšäº¤æ¢æ“ä½œï¼Œæå‡ç®—æ³•æ•ˆç‡
//        ç¬¬ä¸€è½®æ’åºâ€”â€”â€”â€”æŒ‘å‡ºæœ€å¤§çš„æ’åœ¨æœ€å³è¾¹
            for (int i = 0; i < array.length - 1; i++) {
                 System.out.println("æ¯”è¾ƒæ¬¡æ•°"+i);
                if (array[i] > array[i + 1]) {
                    swap(array, i, i + 1);
                }
            }
            k=j+1;
            System.out.println("ç¬¬" + k + "è½®" + Arrays.toString(array));
            if (!swapped) {
                break;
            }
        }
    }

    public static void swap(int[] array, int i, int j) {
        int t = array[i];
        array[i] = array[j];
        array[j] = t;
    }
}
```

**æœ€ä¼˜ç®—æ³•å®ç°**ï¼ˆä¼˜åŒ–`å†…å±‚`å¾ªç¯çš„å¾ªç¯æ¯”è¾ƒæ¬¡æ•°â€”â€”æ•°ç»„å…ƒç´ ä¸­åå‡ ä½æ¯”è¾ƒå®Œçš„å…ƒç´ æ— éœ€å†æ¯”è¾ƒï¼‰

- ä¼˜åŒ–æ–¹å¼ï¼šæ¯è½®å†’æ³¡æ—¶ï¼Œæœ€åä¸€æ¬¡äº¤æ¢ç´¢å¼•å¯ä»¥ä½œä¸ºä¸‹ä¸€è½®å†’æ³¡çš„æ¯”è¾ƒæ¬¡æ•°ï¼Œå¦‚æœè¿™ä¸ªå€¼ä¸ºé›¶ï¼Œè¡¨ç¤ºæ•´ä¸ªæ•°ç»„æœ‰åºï¼Œç›´æ¥é€€å‡ºå¤–å±‚å¾ªç¯å³å¯ã€‚

```java
 public static void bubble_2(int[] array) {
        int n = array.length - 1;//æ¯”è¾ƒå¾ªç¯çš„æ¬¡æ•°
        while (true) {
            int last = 0;// æœ€åä¸€æ¬¡å‘ç”Ÿäº¤æ¢æ—¶çš„ç´¢å¼•ä½ç½®
            for (int i = 0; i < n; i++) {
                System.out.println("æ¯”è¾ƒæ¬¡æ•°"+i);
                if (array[i] > array[i + 1]) {
                    swap(array, i, i + 1);
                    last = i;// æ¯æ¬¡å¾ªç¯åè®°å½•æœ€åä¸€æ¬¡äº¤æ¢çš„ç´¢å¼•ä½ç½®

                }
            }
            n = last;
            System.out.println("ç¬¬"+n+"è½®å¾ªç¯å†’æ³¡æ’åº"+Arrays.toString(array));
            if (0 == n) {
                break;
            }
        }
    }
```

### 3. é€‰æ‹©æ’åº

**è¦æ±‚**

* èƒ½å¤Ÿç”¨è‡ªå·±è¯­è¨€æè¿°é€‰æ‹©æ’åºç®—æ³•
* èƒ½å¤Ÿæ¯”è¾ƒé€‰æ‹©æ’åºä¸å†’æ³¡æ’åº
* ç†è§£éç¨³å®šæ’åºä¸ç¨³å®šæ’åº

**ç®—æ³•æè¿°**

1. å°†æ•°ç»„åˆ†ä¸ºä¸¤ä¸ªå­é›†ï¼Œæ’åºçš„å’Œæœªæ’åºçš„ï¼Œæ¯ä¸€è½®ä»æœªæ’åºçš„å­é›†ä¸­é€‰å‡ºæœ€å°çš„å…ƒç´ ï¼Œæ”¾å…¥æ’åºå­é›†

2. é‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œç›´åˆ°æ•´ä¸ªæ•°ç»„æœ‰åº

<!-- **ç®—æ³•æ€è·¯è§£æï¼š**

1.ç¡®å®šæ•°ç»„éœ€è¦ç»è¿‡å¤šå°‘è½®é€‰æ‹©æ‰èƒ½è®©æ•°ç»„æœ‰åº 	eg:å‡è®¾æ•°ç»„é•¿åº¦æ˜¯8ï¼Œåˆ™éœ€è¦ç»è¿‡7è½®é€‰æ‹©ï¼Œå¯ä»¥é€‰å‡ºå‰7ä¸ªæ•°æ”¾å…¥åˆ°æœ‰åºéƒ¨åˆ†ï¼Œå‰©ä¸‹çš„é‚£ä¸ªæ— éœ€å†é€‰å°±æ˜¯æœ€å¤§çš„äº†ã€‚

2.æ¯è½®å¾ªç¯åº”æŸ¥å‡ºçš„æ•°æ˜¯ä»€ä¹ˆ

3.
-->
```java
public class Test {
    public static void main(String[] args) {
        int[] array = {5, 3, 7, 2, 1, 9, 8, 4};
        selection(array);
    }
    public static void selection(int[] array) {
        for (int i = 0; i < array.length - 1; i++) {
//                i ä»£è¡¨æ¯è½®é€‰æ‹©æœ€å°å…ƒç´ è¦äº¤æ¢åˆ°çš„ç›®æ ‡ç´¢å¼•
            int s =i; // ä»£è¡¨æœ€å°å…ƒç´ çš„ç´¢å¼•å€¼
            for (int j = s+1; j < array.length; j++) {   // æ­¤å¾ªç¯ä¸ºäº†æ‰¾å‡ºæœ€å°çš„é‚£ä¸ªç´¢å¼•ï¼Œæ‰¾å‡ºåæ”¾åˆ°æœ€å°çš„ç´¢å¼•ä½ç½®ï¼Œ
                if (array[s] > array[j]) { // j å…ƒç´ æ¯” s å…ƒç´ è¿˜è¦å°, æ›´æ–° s
                    s = j;   //  æœ€å°å€¼æ”¾åˆ°sçš„ç´¢å¼•ä¸Š
                }
            }
            if (s!=i) { //  å°†å½“å‰æœ€å°æ•°æ®å€¼ä¸æ­¤æ¬¡å¾ªç¯çš„å¼€å§‹ä½ç½®æ•°æ®åšäº¤æ¢ã€‚
                swap(array,s,i);
            }
            System.out.println(Arrays.toString(array));
        }
    }
    public static void swap(int[] array, int i, int j) {
//        i æœ€å°å…ƒç´ çš„ç´¢å¼•å€¼ j
        int t = array[i];
        array[i] = array[j];
        array[j] = t;
    }
}
// è¾“å‡ºç»“æœä¸º
[1, 3, 7, 2, 5, 9, 8, 4]
[1, 2, 7, 3, 5, 9, 8, 4]
[1, 2, 3, 7, 5, 9, 8, 4]
[1, 2, 3, 4, 5, 9, 8, 7]
[1, 2, 3, 4, 5, 9, 8, 7]
[1, 2, 3, 4, 5, 7, 8, 9]
[1, 2, 3, 4, 5, 7, 8, 9]
```





------


## é›†åˆéƒ¨åˆ†
###  7.ArrayList

**è¦æ±‚**

* æŒæ¡ ArrayList æ‰©å®¹è§„åˆ™

æ— å‚ArrayList ï¼Œåˆå§‹å€¼æ˜¯ç©ºï¼Œå³ä¸º0ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = {};

public ArrayList() {
        this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;
    }
```

æœ‰å‚ArrayList ,åˆå§‹å€¼æ˜¯æ•´æ•°ï¼Œåˆå§‹å€¼æ˜¯é‚£ä¸ªæ•´æ•°å‚æ•°çš„å¤§å°ï¼Œé»˜è®¤æ˜¯10ã€‚

```java
private static final Object[] EMPTY_ELEMENTDATA = {};

public ArrayList(int initialCapacity) {
        if (initialCapacity > 0) {
            this.elementData = new Object[initialCapacity];
        } else if (initialCapacity == 0) {
            this.elementData = EMPTY_ELEMENTDATA;
        } else {
            throw new IllegalArgumentException("Illegal Capacity: "+
                                               initialCapacity);
        }
    }
```

æœ‰å‚ArrayList ï¼Œåˆå§‹å€¼æ˜¯é›†åˆï¼Œåˆå§‹å€¼æ˜¯é›†åˆå…ƒç´ ä¸ªæ•°ï¼š

```java


public ArrayList(Collection<? extends E> c) {
        Object[] a = c.toArray();
        if ((size = a.length) != 0) {
            if (c.getClass() == ArrayList.class) {
                elementData = a;
            } else {
                elementData = Arrays.copyOf(a, size, Object[].class);
            }
        } else {
            // replace with empty array.
            elementData = EMPTY_ELEMENTDATA;
        }
    }
```

**æ‰©å®¹**ï¼š

 åœ¨ Java ä¸­ï¼ŒArrayList å†…éƒ¨é‡‡ç”¨ä¸€ä¸ªæ•°ç»„æ¥å­˜å‚¨å…ƒç´ ï¼Œå½“æ•°ç»„çš„é•¿åº¦ä¸è¶³ä»¥å®¹çº³æ–°çš„å…ƒç´ æ—¶ï¼Œéœ€è¦è¿›è¡Œæ‰©å®¹æ“ä½œã€‚ArrayList çš„æ‰©å®¹æœºåˆ¶æ˜¯æ¯æ¬¡æ‰©å®¹å®¹é‡å˜ä¸ºåŸæ¥çš„ 1.5 å€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡æ‰©å®¹åï¼Œæ•°ç»„çš„é•¿åº¦ä¼šå˜ä¸ºåŸæ¥çš„ 1.5 å€ã€‚ 

**1.5 å€çš„æ¥ç”±ï¼š**

åŸæ•°ç»„çš„å…ƒç´ ä¸ªæ•°å€¼ï¼Œå³ç§»ä¸€ä½ï¼Œåœ¨äºŒè¿›åˆ¶ä¸­ï¼Œå³ç§»ä¸€ä½ç›¸å½“äºé™¤ä»¥2ï¼Œå¾—å‡ºæ•°å­—åä¸åŸæ•°ç»„å…ƒç´ ä¸ªæ•°ç›¸åŠ ï¼Œå¾—å‡ºç»“æœä¸ºæ–°æ•°ç»„å¤§å°ï¼Œeg:åŸæ•°ç»„å¤§å°æ˜¯15,15>>1ï¼Œå¾—7ï¼Œ15+7=22ï¼Œå³æ–°æ•°ç»„å¤§å°ä¸º22ã€‚

ä»£ç ï¼š

```java
private void ensureCapacityInternal(int minCapacity) {
    // å¦‚æœ ArrayList çš„å®¹é‡ä¸è¶³ä»¥å®¹çº³æ–°çš„å…ƒç´ 
    if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {
        // å¦‚æœ ArrayList å†…éƒ¨æ•°ç»„è¿˜æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œåˆ™åˆå§‹åŒ–ä¸€ä¸ªé»˜è®¤é•¿åº¦ä¸º 10 çš„æ•°ç»„
        minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);
    }
    // å¦‚æœéœ€è¦æ‰©å®¹
    if (minCapacity - elementData.length > 0)
        grow(minCapacity);
}

/**
 * æ‰©å®¹æ–¹æ³•
 */
private void grow(int minCapacity) {
    // æ‰©å®¹å‰çš„æ•°ç»„é•¿åº¦
    int oldCapacity = elementData.length;
    // æ‰©å®¹åçš„æ•°ç»„é•¿åº¦ï¼Œæ¯æ¬¡æ‰©å®¹ä¸ºåŸæ¥çš„ 1.5 å€
    int newCapacity = oldCapacity + (oldCapacity >> 1);
    // å¦‚æœæ‰©å®¹åçš„æ•°ç»„é•¿åº¦ä¾ç„¶æ— æ³•å®¹çº³å…ƒç´ ï¼Œåˆ™å°†æ•°ç»„é•¿åº¦è®¾ä¸º minCapacity(*è¦æ·»åŠ å…ƒç´ çš„ä¸ªæ•°ï¼Œå³æ–°æ•°ç»„æ‰©å®¹åä¹Ÿæ— æ³•æ»¡è¶³å¤§å°ï¼Œç›´æ¥å»ºè¦ä¼ å…¥å…ƒç´ ä¸ªæ•°å¤§å°çš„æ•°ç»„*)
    if (newCapacity - minCapacity < 0)
        newCapacity = minCapacity;
    // å°†åŸæ¥çš„æ•°ç»„æ‹·è´åˆ°æ–°çš„æ•°ç»„ä¸­
    elementData = Arrays.copyOf(elementData, newCapacity);
}

```

**æ‰©å®¹è§„åˆ™æ€»ç»“**

1. ArrayList() ä¼šä½¿ç”¨é•¿åº¦ä¸ºé›¶çš„æ•°ç»„
2. ArrayList(int initialCapacity) ä¼šä½¿ç”¨æŒ‡å®šå®¹é‡çš„æ•°ç»„
3. public ArrayList(Collection<? extends E> c) ä¼šä½¿ç”¨ c çš„å¤§å°ä½œä¸ºæ•°ç»„å®¹é‡
4. add(Object o) é¦–æ¬¡æ‰©å®¹ä¸º 10ï¼Œå†æ¬¡æ‰©å®¹ä¸ºä¸Šæ¬¡å®¹é‡çš„ 1.5 å€
5. addAll(Collection c) æ²¡æœ‰å…ƒç´ æ—¶ï¼Œæ‰©å®¹ä¸º Math.max(10, å®é™…å…ƒç´ ä¸ªæ•°)å–ä¸¤è€…ä¹‹é—´æœ€å¤§å€¼ï¼Œæœ‰å…ƒç´ æ—¶ä¸º Math.max(åŸå®¹é‡ 1.5 å€, å®é™…å…ƒç´ ä¸ªæ•°)

------

### 8.LinkedList

**è¦æ±‚**

* èƒ½å¤Ÿè¯´æ¸…æ¥š LinkedList å¯¹æ¯” ArrayList çš„åŒºåˆ«ï¼Œå¹¶é‡è§†çº æ­£éƒ¨åˆ†é”™è¯¯çš„è®¤çŸ¥

**ArrayListä¸LinkedListåŒºåˆ«**

- ArrayList

  - åŸºäºæ•°ç»„ï¼Œéœ€è¦è¿ç»­å†…å­˜
  - éšæœºè®¿é—®å¿«ï¼ˆæŒ‡æ ¹æ®ä¸‹æ ‡è®¿é—®ï¼‰
  - å°¾éƒ¨æ’å…¥ã€åˆ é™¤æ€§èƒ½å¯ä»¥ï¼Œå…¶ä»–éƒ¨åˆ†æ’å…¥ã€åˆ é™¤éƒ½ä¼šç§»åŠ¨æ•°æ®ï¼Œå› æ­¤æ€§èƒ½ä¼šä½
  - å¯ä»¥åˆ©ç”¨cpuç¼“å­˜ï¼Œå±€éƒ¨æ€§èƒ½åŸç†
    - è§£é‡Š:
      -  1.cpuç¼“å­˜çš„å¼•å…¥ä½œç”¨ï¼šæ¯”å¦‚cpuåšè¿ç®—æ“ä½œï¼Œéœ€è¦ä»å†…å­˜ä¸­è¯»å–æ•°å­—ç„¶åæ”¾åˆ°å¯„å­˜å™¨ä¸­ï¼Œç®—å‡ºç»“æœåï¼Œå†å°†æ•°å€¼æ”¾åˆ°å†…å­˜ä¸­ï¼Œå†…å­˜çš„è¯»å†™æ•ˆç‡æ²¡é‚£ä¹ˆé«˜ä¼šæœ‰å‡ ç™¾çº³ç§’ï¼Œè¿™æ ·å¦‚æœåç»­ä¸­æ¯æ¬¡æ“ä½œéƒ½åˆ©ç”¨è¿™ä¸ªæ•°å­—ï¼Œæ•ˆç‡å¤ªä½ï¼Œè¿™æ ·å°±å¼•å…¥äº†cpuç¼“å­˜ï¼Œç±»ä¼¼ç¼“å­˜ä¸­é—´ä»¶ï¼Œæå‡æ•ˆç‡ã€‚
      - 2.å±€éƒ¨æ€§åŸç†ï¼Œå°†æ•°æ®è¯»å–åæ”¾åˆ°cpuç¼“å­˜ä¸­ï¼Œæ“ä½œç³»ç»Ÿä¼šæŠŠç›¸é‚»æ•°æ®ä¹Ÿæ”¾åˆ°cpuç¼“å­˜ä¸­ï¼Œè¿™æ ·çš„æ“ä½œå¯¹æ•°ç»„å¾ˆæœ‰åˆ©ï¼Œä½†é“¾è¡¨å°±ä¸è¡Œï¼Œé“¾è¡¨è¯»å–åˆ°ç›¸é‚»å…ƒç´ åï¼Œå¯èƒ½æ˜¯æ²¡ç”¨çš„ï¼Œå› ä¸ºä»–çš„å†…å­˜åœ°å€æ˜¯éšæœºçš„,è€Œä¸”cpuç¼“å­˜ç©ºé—´å¤§å°ä¹Ÿæœ‰é™ï¼Œç­‰ä¸‹æ¬¡æ ¹æ®å±€éƒ¨æ€§åŸç†å°†ç›¸å…³æ•°æ®æ”¾åˆ°cpuç¼“å­˜ä¸­æ—¶ï¼Œå¯èƒ½ä¼šå°†ä¹‹å‰çš„æ•°æ®è¦†ç›–æ‰ã€‚


![](/assets/img/ext-img/cpuç¼“å­˜.jpg)

- LinkedList

  - åŸºäºåŒå‘é“¾è¡¨ï¼Œæ— éœ€è¿ç»­å†…å­˜
  - éšæœºè®¿é—®æ…¢ï¼ˆè¦æ²¿ç€é“¾è¡¨éå†ï¼‰
  - å¤´å°¾æ’å…¥åˆ é™¤æ€§èƒ½é«˜ï¼ˆåœ¨é“¾è¡¨ä¸­é—´æ’å…¥æ€§èƒ½ä¸é«˜ï¼Œå› ä¸ºè¦æŸ¥æ‰¾æ’å…¥ä½ç½®çš„å…ƒç´ ï¼ŒæŸ¥æ‰¾è¿‡ç¨‹ä¼šå¾ˆæ…¢ï¼Œæ‰¾åˆ°ä¹‹åæ’å…¥æ€§èƒ½ä¼šå¾ˆé«˜ï¼‰
  - å ç”¨å†…å­˜å¤šï¼ˆæœ‰å¾ˆå¤šNodeèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹æœ‰ä¸‰ä¸ªå±æ€§ï¼Œåˆ†åˆ«æ˜¯ ä¸Šä¸ªå…ƒç´ ä¸‹æ ‡ã€å…ƒç´ ã€ä¸‹ä¸ªå…ƒç´ ä¸‹æ ‡ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰å¤´å°¾ç»“ç‚¹ç­‰ï¼Œæ‰€ä»¥å ç”¨å†…å­˜è¾ƒå¤§ã€‚ï¼‰
  
  **æ€»ç»“**ï¼šç»¼åˆæ¥çœ‹ï¼Œå¹³å‡ä½¿ç”¨ArrayListæ•ˆç‡é«˜ï¼Œå¤§å¤šæ•°æƒ…å†µéƒ½æ˜¯ç”¨ArrayListã€‚é™¤éæ˜¯å¤´æ’ï¼Œåˆ™ç”¨LinkedListã€‚



